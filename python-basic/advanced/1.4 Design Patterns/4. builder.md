# builder
建造者模式：复杂对象的逐步构建

## @dataclass
`@dataclass` 是 Python 3.7+ 中引入的一个装饰器，它能自动为类生成常见的特殊方法，大大简化了类的定义。让我详细解释它的作用：

## `@dataclass` 的主要功能

### 1. **自动生成特殊方法**
`@dataclass` 会自动为您生成以下方法：
- `__init__()`: 初始化方法
- `__repr__()`: 字符串表示方法
- `__eq__()`: 相等比较方法
- `__lt__()`, `__le__()`, `__gt__()`, `__ge__()`: 比较方法（如果指定了 `order=True`）

### 2. **在您的代码中的应用**

```python
@dataclass
class PythonicSQLQuery:
    select: str = "*"           # 带默认值的字段
    table: str = ""             # 带默认值的字段
    where_conditions: List[str] = None  # 可以为None的字段
    limit_value: Optional[int] = None   # 可选字段
```

等价于手动编写：

```python
class PythonicSQLQuery:
    def __init__(self, select: str = "*", table: str = "", 
                 where_conditions: List[str] = None, 
                 limit_value: Optional[int] = None):
        self.select = select
        self.table = table
        self.where_conditions = where_conditions or []
        self.limit_value = limit_value
    
    def __repr__(self):
        return f"PythonicSQLQuery(select={self.select!r}, table={self.table!r}, ...)"
    
    def __eq__(self, other):
        # 比较所有字段
        if not isinstance(other, PythonicSQLQuery):
            return NotImplemented
        return (self.select == other.select and 
                self.table == other.table and
                self.where_conditions == other.where_conditions and
                self.limit_value == other.limit_value)
```

### 3. **关键特性**

1. **类型提示必须存在**：`@dataclass` 依赖类型提示来确定字段
2. **默认值支持**：可以直接指定字段的默认值
3. **可选参数**：
   - `@dataclass(init=False)`：不生成 `__init__`
   - `@dataclass(repr=False)`：不生成 `__repr__`
   - `@dataclass(eq=False)`：不生成 `__eq__`
   - `@dataclass(frozen=True)`：创建不可变对象

### 4. **在您的例子中的优势**

使用 `@dataclass` 后，您可以这样创建对象：

```python
# 自动获得初始化方法
query1 = PythonicSQLQuery()
query2 = PythonicSQLQuery(select="id, name", table="users")

# 自动获得相等比较
print(query1 == query2)  # 自动比较所有字段

# 自动获得字符串表示
print(query1)  # 自动格式化的输出
```

这使得代码更加简洁、易读和不易出错，特别是在处理主要是数据容器的类时特别有用。